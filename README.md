# LivoxViewerQT

## 简介
**LivoxViewerQT** 是一个基于 **Qt 框架** 开发的 Livox 激光雷达 **可视化与控制软件**。  
支持多种 Livox 雷达设备，提供 **实时点云显示、设备管理、数据记录** 和 **高级可视化功能**。

---

## 功能

### 🎯 核心功能
- **智能网络配置**：自适应网络配置修改，自动发现和连接 Livox 激光雷达设备  
- **实时点云可视化**：高性能 OpenGL 渲染，支持大规模点云数据  
- **多种显示模式**：反射率、距离、高程、平面投影等多种视图模式  
- **交互式测量**：支持 3D 空间测距和点云框选操作  
  

### 📊 数据记录
- **点云录制**：支持 Livox 官方 LVX2 格式录制，支持 PCD/LAS 导出  
- **IMU 数据记录**：陀螺仪和加速度数据保存为 CSV  
- **设备日志采集**：支持调试日志抓取  
- **参数记录**：记录设备参数变化  

### ⚙️ 设备控制
- **状态参数显示**：完整的设备状态参数显示界面  
- **工作模式控制**：支持采样、待机、睡眠等模式  
- **FOV 配置**：可视化调整雷达扫描视场角  
- **网络设置**：灵活设置雷达和数据目标地址网络参数  

### 🔧 高级功能
- **GPS 时间同步**：支持 GPS 模拟与串口转发 GPRMC 报文 
- **IMU 数据显示**：实时显示 IMU 曲线与数值  
- **点云滤波**：基于点云 tag 信息的噪点识别与可视化  
- **平面投影/深度投影**：多种投影显示模式  

---

## 🛠️ 安装与编译

### 前置依赖
请先安装 **Qt 5.15+ 或 Qt 6.2+**，并确保包含以下模块：
- Qt Core  
- Qt GUI  
- Qt Widgets  
- Qt OpenGL  
- Qt Network  
- Qt SerialPort  
- Qt Charts  

---

### Windows

```bash
# 使用 Qt Creator
1. 打开项目
2. 选择 MSVC 编译器套件
3. 设置构建目录
4. 构建项目

```
## 🚀 快速开始

### 首次运行配置
首次运行时会自动检测网络配置并进行必要设置：

- 程序会自动扫描有线网络接口。  
- 检测连接的 Livox 雷达设备。  
- 自动配置主机 IP 与雷达在同一网段（如有需要会提示修改或重启程序）。  
- 生成或更新配置文件（`config.json`），保存当前网络与设备设置。  

### 基本使用流程
1. **连接设备**：使用网线将主机与 Livox 雷达连接。  
2. **启动程序**：运行 `LivoxViewerQT` 可执行文件。  
3. **自动发现**：程序会自动发现并连接雷达设备。  
4. **开始可视化**：连接成功后，点云数据将自动显示在 3D 视图中。  

---

## 📖 使用指南

### 3D 视图控制
- **旋转视图**：鼠标左键拖拽  
- **平移视图**：鼠标右键或中键拖拽  
- **缩放**：鼠标滚轮  
- **重置视图**：工具栏 “重置视角” 按钮

### 点云测距
1. 启用测量模式（工具栏点云测距按钮）。  
2. 按住 `Ctrl` + 左键 选择第一个点。  
3. 按住 `Ctrl` + 左键 选择第二个点。  
4. 查看距离测量结果（将在测量面板/状态栏显示）。

### 点云框选
1. 启用选择模式（工具栏点云框选按钮）。  
2. 按住 `Ctrl` + 左键拖拽选择区域。  
3. 查看选中点的属性表格（坐标、反射率、tag 等）。

### 数据记录

#### 录制点云 (LVX2)
- 点击 **"保存 LVX2 点云"** 按钮。  
- 选择保存路径与录制时长。  
- 点击开始录制，录制完成后程序将自动保存 LVX2 文件。

#### IMU 数据记录
- 确保设备 IMU 数据发送已开启。  
- 点击 **"保存 IMU 数据"**，选择保存路径与时长，开始记录。  
- IMU 数据将以 CSV 格式保存（时间戳、加速度、角速度等字段）。

---

## 📁 项目结构

```markdown
LivoxViewerQT/
├── main.cpp                     # 程序入口
├── mainwindow.h/cpp             # 主窗口类
├── point_widget.cpp             # 点云显示组件
├── sdk_init.cpp                 # Livox SDK 初始化
├── sdk_callbacks.cpp            # SDK 回调处理
├── point_visualize.cpp          # 点云可视化处理
├── resources/                   # 程序图标等资源文件
├── config.json                  # 配置文件（自动生成）
├── CMakeLists.txt               # CMake 构建配置
├── README.md                    # 项目说明
├── LICENSE                      # 许可证文件
└── livox_sdk_qt/                # Livox SDK 相关文件
    ├── include/                 # SDK 头文件
    │   ├── livox_lidar_api.h    # Livox 雷达 API 函数声明，用于初始化、采集数据、设备控制等
    │   └── livox_lidar_def.h    # SDK 常量、结构体、枚举类型定义，如点云数据结构、设备信息结构等
    └── lib/                     # SDK 静态库文件
        ├── liblivox_lidar_sdk_static.a   # Linux/Unix 静态库
        └── livox_lidar_sdk_static.lib    # Windows 静态库
```
---

## 🔧 故障排除

### 常见问题

**设备无法连接**
- 检查网线连接是否紧固。    
- 检查防火墙或安全软件是否阻止 UDP 广播/接收端口（默认端口：56000 等）。  
- 查看程序日志输出获取错误详情。

**点云显示异常**
- 确认显卡驱动支持 OpenGL 3.3+。  
- 检查点云数据格式与采样模式是否正确。  
- 检查激光雷达设备是否正常运行。

**性能问题**
- 降低点云积分时间。   
- 启用点云滤波以减少渲染点数。  

### 日志查看
- 程序运行日志显示在主界面底部日志区域，包含详细的程序运行状态与错误信息。  

---

## 📄 许可证
本项目基于 Qt 框架与 Livox SDK2 开发。请在使用或分发本项目时，遵循相关依赖组件的许可证条款。  
**主要许可证**：MIT License（见项目根目录 `LICENSE` 文件）。

---

✨ **注意**：本项目为独立开源项目，与 Livox Tech 无关。 


